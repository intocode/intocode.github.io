(this["webpackJsonpreact-offline-shop-challenge-with-cart"]=this["webpackJsonpreact-offline-shop-challenge-with-cart"]||[]).push([[0],{10:function(e,t,c){e.exports={product:"product_product__1Gc1X",inner:"product_inner__2irFb",image:"product_image__2Saq0",price:"product_price__3ZiqG",name:"product_name__jQMBj"}},19:function(e,t,c){e.exports={wrapper:"styles_wrapper__1iiIL",closeButton:"styles_closeButton__2kn9p"}},20:function(e,t,c){e.exports={tableRow:"styles_tableRow__1I33i",deleteIcon:"styles_deleteIcon__CbD-u"}},24:function(e,t,c){e.exports={products:"products_products__710Hk"}},26:function(e,t,c){e.exports={cartButton:"styles_cartButton__2Fsn5"}},40:function(e,t,c){"use strict";c.r(t);var n=c(1),r=c.n(n),a=c(22),i=c.n(a),s=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,41)).then((function(t){var c=t.getCLS,n=t.getFID,r=t.getFCP,a=t.getLCP,i=t.getTTFB;c(e),n(e),r(e),a(e),i(e)}))},o=c(11),d=Object(n.createContext)(null),j=c(28),l=c(4),u={products:[{id:1,categoryId:1,name:"MacBook",price:1e5,discount:3,left:31,image:"http://intocode.ru/d/react-project-1/images/1.jpg"},{id:2,categoryId:1,name:"Galaxy",price:35999,discount:0,left:11,image:"http://intocode.ru/d/react-project-1/images/2.jpg"},{id:3,categoryId:3,name:"\u0421\u043a\u0443\u0442\u0435\u0440",price:65500,discount:10,left:0,image:"http://intocode.ru/d/react-project-1/images/3.jpg"},{id:4,categoryId:2,name:"\u041c\u043e\u043d\u0438\u0442\u043e\u0440 Samsung",price:12e3,discount:0,left:7,image:"http://intocode.ru/d/react-project-1/images/4.jpg"},{id:5,categoryId:3,name:"\u0420\u0435\u0441\u043f\u0435\u0440\u0430\u0442\u043e\u0440\u043d\u0430\u044f \u043c\u0430\u0441\u043a\u0430",price:500,discount:0,left:24,image:"http://intocode.ru/d/react-project-1/images/5.jpg"},{id:6,categoryId:2,name:"\u0421\u0442\u0438\u0440\u0430\u043b\u044c\u043d\u0430\u044f \u043c\u0430\u0448\u0438\u043d\u0430",price:1e5,discount:25,left:0,image:"http://intocode.ru/d/react-project-1/images/6.jpg"},{id:7,categoryId:2,name:"\u0411\u0435\u043b\u044b\u0439 \u0445\u043e\u043b\u043e\u0434\u0438\u043b\u044c\u043d\u0438\u043a",price:43100,discount:50,left:18,image:"http://intocode.ru/d/react-project-1/images/7.jpg"},{id:8,categoryId:1,name:"\u041a\u043e\u043b\u043e\u043d\u043a\u0430",price:3e3,discount:0,left:1,image:"http://intocode.ru/d/react-project-1/images/8.jpg"},{id:9,categoryId:1,name:"\u041d\u0430\u0443\u0448\u043d\u0438\u043a\u0438",price:1500,discount:15,left:5,image:"http://intocode.ru/d/react-project-1/images/9.jpg"}],categories:[{id:1,name:"\u0413\u0430\u0434\u0436\u0435\u0442\u044b \u0438 \u0430\u043a\u0441\u0435\u0441\u0441\u0443\u0430\u0440\u044b"},{id:2,name:"\u0411\u044b\u0442\u043e\u0432\u0430\u044f \u0442\u0435\u0445\u043d\u0438\u043a\u0430"},{id:3,name:"\u041f\u0440\u043e\u0447\u0435\u0435"}],cartItems:[{id:1,productId:2,amount:2},{id:2,productId:9,amount:5}]},b=function(e){return function(t,c){return console.log("action: ".concat(JSON.stringify(c)),t),e(t,c)}}((function(e,t){switch(t.type){case"remove":return Object(l.a)(Object(l.a)({},e),{},{cartItems:e.cartItems.filter((function(e){return e.id!==t.payload}))});case"increase":return Object(l.a)(Object(l.a)({},e),{},{cartItems:e.cartItems.map((function(e){return e.id===t.payload.id&&e.amount<t.payload.product.left?Object(l.a)(Object(l.a)({},e),{},{amount:e.amount+1}):e}))});case"decrease":return Object(l.a)(Object(l.a)({},e),{},{cartItems:e.cartItems.map((function(e){return e.id===t.payload.id&&e.amount>1?Object(l.a)(Object(l.a)({},e),{},{amount:e.amount-1}):e}))});case"add-to-cart":return Object(l.a)(Object(l.a)({},e),{},{cartItems:[].concat(Object(j.a)(e.cartItems),[{id:Math.random(),productId:t.payload,amount:1}])});default:return e}})),p=c(2),m=c(8),O=c(0);var h=function(){var e=Object(n.useContext)(d).state;return Object(O.jsx)("div",{children:Object(O.jsx)("div",{className:"list-group list-group-flush",children:e.categories.map((function(e){return Object(O.jsx)(m.b,{to:"/category/".concat(e.id),className:"list-group-item list-group-item-action",children:e.name},e.id)}))})})},x=c(24),f=c.n(x),g=c(10),v=c.n(g),y=function(e){var t=e.price,c=e.discount;if(!c)return Object(O.jsxs)("h4",{children:[t," \u20bd"]});var n=t-t/100*c;return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsxs)("h4",{children:[n," \u20bd"]}),Object(O.jsxs)("strike",{children:[t," \u20bd"]})]})};var I=function(e){var t=e.product,c=Object(n.useContext)(d),r=c.state,a=c.dispatch,i=!!r.cartItems.find((function(e){return e.productId===t.id}));return Object(O.jsx)("div",{className:v.a.product,children:Object(O.jsxs)("div",{className:v.a.inner,children:[Object(O.jsx)("div",{className:v.a.image,children:Object(O.jsx)("img",{src:t.image,alt:""})}),Object(O.jsx)("div",{className:v.a.price,children:y(t)}),Object(O.jsx)("div",{className:v.a.name,children:t.name}),Object(O.jsx)("div",{className:v.a.action,children:t.left?Object(O.jsx)("button",{className:"btn btn-primary w-100",disabled:i,onClick:function(){return a({type:"add-to-cart",payload:t.id})},children:i?"\u0412 \u043a\u043e\u0440\u0437\u0438\u043d\u0435":"\u041a\u0443\u043f\u0438\u0442\u044c"}):Object(O.jsx)("button",{className:"btn btn-primary w-100",disabled:!0,children:"\u041d\u0435\u0442 \u0432 \u043d\u0430\u043b\u0438\u0447\u0438\u0438"})})]})})};var N=function(){var e=Object(p.f)().categoryId,t=Object(n.useContext)(d).state.products.filter((function(t){return!e||t.categoryId===Number(e)}));return Object(O.jsx)("div",{className:f.a.products,children:t.map((function(e){return Object(O.jsx)(I,{product:e},e.id)}))})};var _=function(){return Object(O.jsx)("div",{children:"\u043e \u0434\u043e\u0441\u0442\u0430\u0432\u043a\u0430"})},C=c(25),w=c(26),k=c.n(w),B=c(19),F=c.n(B),S=c(20),R=c.n(S),L=c(27);var M=function(e){var t=e.id,c=e.product,r=e.amount,a=e.index,i=Object(n.useContext)(d).dispatch;return Object(O.jsxs)("tr",{className:R.a.tableRow,children:[Object(O.jsx)("td",{children:a+1}),Object(O.jsx)("td",{children:Object(O.jsx)("img",{src:c.image,alt:""})}),Object(O.jsx)("td",{children:c.name}),Object(O.jsx)("td",{children:c.left-r}),Object(O.jsx)("td",{children:Object(O.jsxs)("div",{className:"row flex-nowrap",children:[Object(O.jsx)("div",{className:"col",children:Object(O.jsx)("button",{className:"btn btn-sm btn-outline-info",onClick:function(){return i({type:"increase",payload:{id:t,product:c}})},children:"+"})}),Object(O.jsx)("div",{className:"col text-center px-2",children:r}),Object(O.jsx)("div",{className:"col",children:Object(O.jsx)("button",{className:"btn btn-sm btn-outline-info",onClick:function(){return i({type:"decrease",payload:{id:t,product:c}})},children:"-"})})]})}),Object(O.jsx)("td",{children:Object(O.jsx)("span",{onClick:function(){return i({type:"remove",payload:t})},className:R.a.deleteIcon,children:Object(O.jsx)("img",{src:L.a,alt:""})})})]})};var G=function(){var e=Object(n.useContext)(d).state,t=e.cartItems.map((function(t){return Object(l.a)(Object(l.a)({},t),{},{product:e.products.find((function(e){return e.id===t.productId}))})}));return Object(O.jsxs)("table",{className:"table",children:[Object(O.jsx)("thead",{children:Object(O.jsxs)("tr",{children:[Object(O.jsx)("th",{children:"#"}),Object(O.jsx)("th",{children:" "}),Object(O.jsx)("th",{children:"\u0422\u043e\u0432\u0430\u0440"}),Object(O.jsx)("th",{children:"\u041e\u0441\u0442\u0430\u0442\u043e\u043a"}),Object(O.jsx)("th",{children:"\u041a\u043e\u043b-\u0432\u043e"}),Object(O.jsx)("th",{children:" "})]})}),Object(O.jsx)("tbody",{children:t.map((function(e,t){return Object(O.jsx)(M,Object(l.a)({index:t},e),e.id)}))})]})};var J=function(e){var t=e.anchor,c=e.open,r=e.onClose,a=Object(n.useRef)(null),i=Object(n.useContext)(d).state,s=t.current,j=Object(n.useState)(null),l=Object(o.a)(j,2),u=l[0],b=l[1];return Object(n.useEffect)((function(){a.current&&b(a.current.offsetWidth)}),[c]),c?Object(O.jsxs)("div",{ref:a,className:F.a.wrapper,style:{left:s.offsetLeft-u+s.offsetWidth,top:s.offsetTop+s.clientHeight},children:[Object(O.jsx)("span",{className:F.a.closeButton,onClick:r,children:"\u0437\u0430\u043a\u0440\u044b\u0442\u044c"}),i.cartItems.length?Object(O.jsx)(G,{}):Object(O.jsx)("div",{className:"text-center text-muted my-2",children:"\u0412 \u043a\u043e\u0440\u0437\u0438\u043d\u0435 \u043d\u0435\u0442 \u0442\u043e\u0432\u0430\u0440\u043e\u0432"})]}):null},P=function(){var e=Object(n.useContext)(d).state.cartItems,t=Object(n.useRef)(null),c=Object(n.useState)(!1),r=Object(o.a)(c,2),a=r[0],i=r[1];return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsxs)("div",{className:k.a.cartButton,ref:t,onClick:function(){return i(!0)},children:[Object(O.jsx)("img",{src:C.a,alt:""}),Object(O.jsx)("span",{children:e.length||""})]}),Object(O.jsx)(J,{anchor:t,open:a,onClose:function(){return i(!1)}})]})};var T=function(){return Object(O.jsx)("nav",{className:"navbar navbar-light bg-light mb-3",children:Object(O.jsxs)("div",{className:"container-fluid",children:[Object(O.jsx)(m.b,{className:"navbar-brand",to:"/",children:"Intocode Coding Shopcamp"}),Object(O.jsx)(P,{})]})})};var q=function(){var e=Object(n.useReducer)(b,u),t=Object(o.a)(e,2),c=t[0],r=t[1];return Object(O.jsx)(d.Provider,{value:{state:c,dispatch:r},children:Object(O.jsxs)("div",{className:"container",children:[Object(O.jsx)(T,{}),Object(O.jsxs)("div",{className:"row",children:[Object(O.jsx)("div",{className:"col-3",children:Object(O.jsx)(h,{})}),Object(O.jsx)("div",{className:"col",children:Object(O.jsxs)(p.c,{children:[Object(O.jsx)(p.a,{path:"/",exact:!0,children:Object(O.jsx)(N,{})}),Object(O.jsx)(p.a,{path:"/category/:categoryId",children:Object(O.jsx)(N,{})}),Object(O.jsx)(p.a,{path:"/delivery",children:Object(O.jsx)(_,{})})]})})]})]})})};c(39);i.a.render(Object(O.jsx)(r.a.StrictMode,{children:Object(O.jsx)(m.a,{children:Object(O.jsx)(q,{})})}),document.getElementById("root")),s()}},[[40,1,2]]]);